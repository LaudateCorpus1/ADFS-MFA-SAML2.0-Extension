<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="SURFnet.Authentication.Adfs.StepUp" type="SURFnet.Authentication.Adfs.Plugin.Configuration.StepUpSection, SURFnet.Authentication.Adfs.Plugin"/>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="SURFnet.Authentication.Adfs.Plugin.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
  </configSections>
  <SURFnet.Authentication.Adfs.StepUp>
    <institution schacHomeOrganization="institution-b.nl" activeDirectoryUserIdAttribute="employeeNumber"/>
    <localSP sPSigningCertificate="757AC14E8B4CBABDD058E3080F6DCD76DFE0FEC8"
		minimalLoa="http://test.surfconext.nl/assurance/sfo-level2"/>
    <stepUpIdP secondFactorEndPoint="https://sa-gw.test.surfconext.nl/second-factor-only/single-sign-on"/>
  </SURFnet.Authentication.Adfs.StepUp>
  <log4net>
    <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
      <logName value="AD FS Plugin"/>
      <applicationName value="ADFS Plugin" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] [%-5level] %logger - ctxId=%property{contextId} actId=%property{activityId} | %message%newline" />
      </layout>
    </appender>
    <root>
      <level value="Information" />
      <appender-ref ref="EventLogAppender" />
    </root>
  </log4net>

  <!--BEGIN Remove after testing-->
  <appSettings>
    <add key="MinimalLoa" value="http://test.surfconext.nl/assurance/sfo-level2"/>
  </appSettings>
  <applicationSettings>
    <SURFnet.Authentication.Adfs.Plugin.Properties.Settings>
      <setting name="SecondFactorEndpoint" serializeAs="String">
        <value>https://sa-gw.test.surfconext.nl/second-factor-only/single-sign-on</value>
      </setting>
      <setting name="SpSigningCertificate" serializeAs="String">
        <value>757AC14E8B4CBABDD058E3080F6DCD76DFE0FEC8</value>
      </setting>
      <setting name="MinimalLoa" serializeAs="String">
        <value>http://test.surfconext.nl/assurance/sfo-level2</value>
      </setting>
      <setting name="AuthenticationServiceUrl" serializeAs="String">
        <value />
      </setting>
      <setting name="schacHomeOrganization" serializeAs="String">
        <value>institution-b.nl</value>
      </setting>
      <setting name="ActiveDirectoryUserIdAttribute" serializeAs="String">
        <value>employeeNumber</value>
      </setting>
    </SURFnet.Authentication.Adfs.Plugin.Properties.Settings>
  </applicationSettings>
  <!--END Remove after testing-->
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <!--Downgrade-->
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-12.0.0.0" newVersion="12.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>